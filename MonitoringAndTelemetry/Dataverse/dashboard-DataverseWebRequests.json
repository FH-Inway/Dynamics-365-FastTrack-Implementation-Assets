{"$schema":"https://dataexplorer.azure.com/static/d/schema/60/dashboard.json","id":"bcb64fd1-a4c3-47aa-a9a2-02788a260215","eTag":"40def531-98bc-49be-986d-e5d72e407bb2","schema_version":"60","title":"Dataverse Web Requests","tiles":[{"id":"fef0a29b-3ea0-4e89-95ff-e86e531aeb73","title":"Success and Failure over last 30 days","visualType":"stackedcolumn","pageId":"eceaabc9-9dae-4ee2-b55f-f9cad42a8011","layout":{"x":0,"y":0,"width":9,"height":7},"queryRef":{"kind":"query","queryId":"8cbae5ac-24c3-4ee4-91b9-ea6323fde590"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"f1c5b49f-05c9-4000-9ead-81cb35f4ea6f","title":"Success rate over 30 days","visualType":"line","pageId":"eceaabc9-9dae-4ee2-b55f-f9cad42a8011","layout":{"x":0,"y":7,"width":9,"height":7},"queryRef":{"kind":"query","queryId":"5de36a85-4183-4d42-9a25-589e561c7acb"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":["SuccessRate"],"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"5d1309a3-d0f7-4115-9d5b-0f3e76206502","title":"Failure rate over 30 days","visualType":"line","pageId":"eceaabc9-9dae-4ee2-b55f-f9cad42a8011","layout":{"x":9,"y":7,"width":9,"height":7},"queryRef":{"kind":"query","queryId":"d6e54e11-ab35-4550-8aed-5fa8e44a7746"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":["SuccessRate"],"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"5bdfb14a-d228-4b85-a261-b6526393a8fb","title":"Web API performance over last 3 weeks","visualType":"table","pageId":"eceaabc9-9dae-4ee2-b55f-f9cad42a8011","layout":{"x":0,"y":14,"width":18,"height":8},"queryRef":{"kind":"query","queryId":"433b9964-e947-4d0f-8a94-ceb20a9fd34c"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"3ae5b50b-a65b-4290-90c9-0399c2227fd3","title":"Performance buckets","visualType":"stackedcolumn","pageId":"eceaabc9-9dae-4ee2-b55f-f9cad42a8011","layout":{"x":9,"y":0,"width":9,"height":7},"queryRef":{"kind":"query","queryId":"325e4a6b-dae3-4917-818b-0d6c3ac3e5ca"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"0aea0eb9-7027-4d22-97b7-32795735d52d","title":"Result code distribution","visualType":"stackedcolumn","pageId":"eceaabc9-9dae-4ee2-b55f-f9cad42a8011","layout":{"x":0,"y":22,"width":9,"height":7},"queryRef":{"kind":"query","queryId":"315cd241-ea39-47b0-ab31-72d0b3cfe5a1"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}}],"baseQueries":[],"parameters":[{"kind":"duration","id":"a3b36f9f-4eee-40ec-ae12-65784e9909d2","displayName":"Time range","description":"","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"all"}}],"dataSources":[{"id":"717a9631-995b-4fde-a915-bb3013f6bab9","kind":"manual-kusto","scopeId":"kusto","name":"Dataverse","clusterUri":"https://ade.applicationinsights.io/subscriptions/<SubscriptionID>","database":"Dynamics365AppInsights"}],"pages":[{"name":"Web Requests Stastics","id":"eceaabc9-9dae-4ee2-b55f-f9cad42a8011"}],"queries":[{"dataSource":{"kind":"inline","dataSourceId":"717a9631-995b-4fde-a915-bb3013f6bab9"},"text":"// Please enter your KQL query (Example):\n// <table name>\n// | where <datetime column> between (['_startTime'] .. ['_endTime']) // Time range filtering\n// | take 100\nrequests\n| where timestamp >= ago(30d)\n| extend SuccessCategory = iif(success == true, \"Success\", \"Failure\")\n| summarize Count = count() by bin(timestamp, 1d), SuccessCategory\n| render columnchart","id":"8cbae5ac-24c3-4ee4-91b9-ea6323fde590","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"717a9631-995b-4fde-a915-bb3013f6bab9"},"text":"\nrequests\n| where timestamp >= ago(30d)\n| summarize SuccessCount = countif(success == true), TotalCount = count() by bin(timestamp, 1d)\n| extend SuccessRate = todouble(SuccessCount) / todouble(TotalCount) * 100\n| render timechart","id":"5de36a85-4183-4d42-9a25-589e561c7acb","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"717a9631-995b-4fde-a915-bb3013f6bab9"},"text":"\nrequests\n| where timestamp >= ago(30d)\n| summarize SuccessCount = countif(success != true), TotalCount = count() by bin(timestamp, 1d)\n| extend SuccessRate = todouble(SuccessCount) / todouble(TotalCount) * 100\n| render timechart","id":"d6e54e11-ab35-4550-8aed-5fa8e44a7746","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"717a9631-995b-4fde-a915-bb3013f6bab9"},"text":"let W0 = requests\n| where timestamp >= startofweek(ago(7d)) and timestamp < startofweek(now())\n| where isnotempty(operation_Name) and trim(\" \", operation_Name) != \"\" \n       and not(operation_Name matches regex \"^[0-9a-fA-F-]{36}$\")\n| summarize \n    P99_W0 = percentile(duration, 99),\n    P95_W0 = percentile(duration, 95),\n    P75_W0 = percentile(duration, 75),\n    P50_W0 = percentile(duration, 50) \n    by operation_Name;\nlet W1 = requests\n| where timestamp >= startofweek(ago(14d)) and timestamp < startofweek(ago(7d))\n| where isnotempty(operation_Name) and trim(\" \", operation_Name) != \"\" \n       and not(operation_Name matches regex \"^[0-9a-fA-F-]{36}$\")\n| summarize \n    P99_W1 = percentile(duration, 99),\n    P95_W1 = percentile(duration, 95),\n    P75_W1 = percentile(duration, 75),\n    P50_W1 = percentile(duration, 50) \n    by operation_Name;\nlet W2 = requests\n| where timestamp >= startofweek(ago(21d)) and timestamp < startofweek(ago(14d))\n| where isnotempty(operation_Name) and trim(\" \", operation_Name) != \"\" \n       and not(operation_Name matches regex \"^[0-9a-fA-F-]{36}$\")\n| summarize \n    P99_W2 = percentile(duration, 99),\n    P95_W2 = percentile(duration, 95),\n    P75_W2 = percentile(duration, 75),\n    P50_W2 = percentile(duration, 50) \n    by operation_Name;\nW0\n| join kind=fullouter (W1) on operation_Name\n| join kind=fullouter (W2) on operation_Name\n| where isnotempty(operation_Name) and trim(\" \", operation_Name) != \"\"  \n| project operation_Name, \n    P99_W0, P99_W1, P99_W2,\n    P95_W0, P95_W1, P95_W2,\n    P75_W0, P75_W1, P75_W2,\n    P50_W0, P50_W1, P50_W2\n| order by operation_Name asc\n","id":"433b9964-e947-4d0f-8a94-ceb20a9fd34c","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"717a9631-995b-4fde-a915-bb3013f6bab9"},"text":"// Stacked column chart for performance buckets\nrequests\n| where timestamp >= ago(30d)\n| summarize Count = count() by bin(timestamp, 1d), performanceBucket\n| render columnchart","id":"325e4a6b-dae3-4917-818b-0d6c3ac3e5ca","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"717a9631-995b-4fde-a915-bb3013f6bab9"},"text":"requests\n| where timestamp >= ago(30d)\n| summarize Count = count() by bin(timestamp, 1d), resultCode\n| order by timestamp asc\n","id":"315cd241-ea39-47b0-ab31-72d0b3cfe5a1","usedVariables":[]}]}