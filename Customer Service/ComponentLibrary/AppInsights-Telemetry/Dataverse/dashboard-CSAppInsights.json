{"$schema":"https://dataexplorer.azure.com/static/d/schema/54/dashboard.json","id":"b72baf19-493c-4558-a3a8-31b42be88ec3","eTag":"38ca19c4-670c-4fd7-8ed2-79814fa98d13","schema_version":"54","title":"CSAppInsights","tiles":[{"id":"e9b124a7-74b5-4ee7-ad8a-7fc27d3b8130","title":"Form Load Times","visualType":"table","pageId":"4608c43f-3760-4b3e-8bd5-dd8cdd168a5a","layout":{"x":0,"y":0,"width":24,"height":6},"queryRef":{"kind":"query","queryId":"6aabb11d-6f15-4c97-bc5b-363ea709de30"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"1507e813-0ced-4732-a9b1-3367198fe2f0","title":"Top x Plugins with High execution time","visualType":"pie","pageId":"4608c43f-3760-4b3e-8bd5-dd8cdd168a5a","layout":{"x":0,"y":6,"width":9,"height":7},"queryRef":{"kind":"query","queryId":"786892e6-6d0c-4685-900c-0f42722d019b"},"visualOptions":{"hideLegend":false,"legendLocation":"bottom","xColumn":null,"yColumns":null,"seriesColumns":null,"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","pie__topNSlices":null,"crossFilter":[],"drillthrough":[]}},{"id":"cf7db5ba-c918-4c6d-ac76-27f537ccc8cf","title":"Network performance by locations","visualType":"table","pageId":"4608c43f-3760-4b3e-8bd5-dd8cdd168a5a","layout":{"x":9,"y":6,"width":15,"height":6},"queryRef":{"kind":"query","queryId":"edbda511-a9de-4fc5-891f-0e2c3720c36c"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"e8ffe423-b344-40f9-a6de-b362729df5bf","title":"PlugIns with Depth > 2","visualType":"column","pageId":"4608c43f-3760-4b3e-8bd5-dd8cdd168a5a","layout":{"x":0,"y":13,"width":9,"height":7},"queryRef":{"kind":"query","queryId":"01099144-6fb5-4e59-a579-27f7ae903aff"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"ca3ff5c2-6a38-4c95-8fc6-2837f0c22eb7","title":"Most Failed Plugins","visualType":"table","pageId":"4608c43f-3760-4b3e-8bd5-dd8cdd168a5a","layout":{"x":9,"y":12,"width":15,"height":7},"queryRef":{"kind":"query","queryId":"f227283b-fdad-4d92-b835-f8695433fbaf"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}}],"baseQueries":[],"parameters":[{"kind":"duration","id":"70801c37-5de8-4cc1-918b-3343d58a7512","displayName":"Time range","description":"","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"all"}}],"dataSources":[{"id":"a658b959-73ee-4f3d-b8da-2055107a89d4","kind":"manual-kusto","scopeId":"kusto","name":"CSAppInsights","clusterUri":"https://ade.applicationinsights.io/subscriptions/<SubscriptionId>","database":"CSApplicationInsights"}],"pages":[{"name":"Form and Plugin Metrics","id":"4608c43f-3760-4b3e-8bd5-dd8cdd168a5a"}],"queries":[{"dataSource":{"kind":"inline","dataSourceId":"a658b959-73ee-4f3d-b8da-2055107a89d4"},"text":"pageViews\n| extend cd = parse_json(customDimensions)\n| where cd.pageName == \"EditForm\"\n| extend LoadTypeSimple = iif(toint(cd.loadType) == 0, 0, 1)\n| extend entityName = tostring(cd.entityName)\n| project LoadTypeSimple, duration, entityName\n| summarize ColdCount=countif(LoadTypeSimple==0),\n        WarmCount=countif(LoadTypeSimple==1),\n        TotalCount=count(),\n        AvgColdLoad=round(avgif(duration, LoadTypeSimple==0)),\n        AvgWarmLoad=round(avgif(duration, LoadTypeSimple==1)),\n        MaxColdLoad=maxif(duration, LoadTypeSimple==0),\n        MaxWarmLoad=maxif(duration, LoadTypeSimple==1),\n        P50FormLoad=percentile(duration, 50),\n        P90FormLoad=percentile(duration, 90) by entityName\n    |order by TotalCount desc\n","id":"6aabb11d-6f15-4c97-bc5b-363ea709de30","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"a658b959-73ee-4f3d-b8da-2055107a89d4"},"text":"dependencies\n| where type == 'Plugin'\n| where name !startswith \"Microsoft\" // filtering the OOB plugins\n| extend executionTimeInMS = todouble(duration)\n| extend cd = parse_json(customDimensions)\n| extend depth = toint(cd.depth)\n| where success == 'True'\n| summarize percentiles(executionTimeInMS, 10, 50, 90, 95, 98), NumOfRequests = count(), MaxDepth = max(depth), AvgExecutionTime= toint(avg(executionTimeInMS)) by name\n| join kind = inner ( dependencies\n| summarize NumOfTotalRequests = count() by name ) on name\n| project-away name1\n| extend PassRate = todouble(NumOfRequests) * 100 / NumOfTotalRequests\n| extend PT95vsPT50Ratio = iif(percentile_executionTimeInMS_50 != 0, percentile_executionTimeInMS_95 / percentile_executionTimeInMS_50, toreal(0))\n//| where percentile_executionTimeInMS_90 > 500\n| where AvgExecutionTime > 500\n| project-rename Namespace=name, ExecutionTimeinMS_90=percentile_executionTimeInMS_95, ExecutionCount = NumOfTotalRequests, Depth=MaxDepth\n| project Namespace, ExecutionCount, AvgExecutionTime, percentile_executionTimeInMS_50, ExecutionTimeinMS_90, Depth\n| order by ExecutionTimeinMS_90 desc\n","id":"786892e6-6d0c-4685-900c-0f42722d019b","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"a658b959-73ee-4f3d-b8da-2055107a89d4"},"text":"// Please enter your KQL query (Example):\n// <table name>\n// | where <datetime column> between (['_startTime'] .. ['_endTime']) // Time range filtering\n// | take 100\npageViews\n| where timestamp >= ago(180d)\n| take 10\n| extend dimensions = parse_json(customDimensions)\n| project\n    USERID = user_Id,\n    COUNTRY = client_CountryOrRegion,\n    APPMODULE = dimensions.appModule, \n    PAGENAME = dimensions.pageName, \n    ENTITYNAME = dimensions.entityName, \n    LATENCY = dimensions.warmLatency, \n    THROUGHPUT = dimensions.warmThroughput\n| summarize\n    min(todouble(THROUGHPUT)),\n    max(todouble(THROUGHPUT)),\n    avg(todouble(THROUGHPUT))\nby\n    USERID, \n    COUNTRY\n","id":"edbda511-a9de-4fc5-891f-0e2c3720c36c","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"a658b959-73ee-4f3d-b8da-2055107a89d4"},"text":"dependencies\n| where type == 'Plugin'\n| extend cd = parse_json(customDimensions)\n| extend depth = toint(cd.depth)\n| where name !startswith \"Microsoft\" // filtering the OOB plugins\n| where depth > 2\n| summarize count(), (P95)=percentiles(duration,95), (P95s)=percentile(toint(duration),95) by depth, name, bin(timestamp, 7d)\n| order by depth\n| where isnotempty(P95)\n| project name, depth, timestamp, count_, P95\n| summarize MaxDepth = max(depth) by name\n| order by MaxDepth desc\n\n","id":"01099144-6fb5-4e59-a579-27f7ae903aff","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"a658b959-73ee-4f3d-b8da-2055107a89d4"},"text":"dependencies\n| where type == \"Plugin\"\n| extend cd = parse_json(customDimensions)\n| project timestamp, success, correlationId = cd.correlationId, typeName = cd.pluginType\n| summarize NumberofRequest = count(), Passed = dcountif(timestamp, success == \"True\"), Failed = dcountif(timestamp, success == \"False\") by tostring(typeName)\n| order by Failed desc\n| limit 10\n","id":"f227283b-fdad-4d92-b835-f8695433fbaf","usedVariables":[]}]}