{"$schema":"https://dataexplorer.azure.com/static/d/schema/52/dashboard.json","id":"f9c1b261-b8cf-4cfb-a7ac-903f10e36956","eTag":"5b40be10-42ec-4b6c-9bd7-9248dcdd5aca","schema_version":"52","title":"Mobile Dashboard","tiles":[{"id":"a574df26-bda4-460b-9b24-814c122f28cd","title":"Usage by App versions (requires UCI events)","visualType":"table","pageId":"2c4bf046-633a-4882-9c1b-d8c8ae865e0c","layout":{"x":16,"y":0,"width":8,"height":7},"queryRef":{"kind":"query","queryId":"3c6773d8-c437-4c9a-81f3-c59307510481"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"2b34cd53-a13d-4600-bd5f-0b3d3a9704b9","title":"Daily sync success rate","visualType":"timechart","pageId":"2c4bf046-633a-4882-9c1b-d8c8ae865e0c","layout":{"x":14,"y":7,"width":10,"height":7},"queryRef":{"kind":"query","queryId":"1968623d-54aa-4c5b-af95-f898a6335f32"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"e07de91f-743b-479a-a014-fa9b69b6f632","title":"Data sync duration (P95) by Sync mode","visualType":"timechart","pageId":"2c4bf046-633a-4882-9c1b-d8c8ae865e0c","layout":{"x":0,"y":7,"width":14,"height":7},"queryRef":{"kind":"query","queryId":"424e5000-97eb-4c0f-8f9f-002c70ca8b8d"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"6722ed26-01e2-4d5f-b15f-3b94629e9ee4","title":"Daily users doing offline sync","visualType":"timechart","pageId":"2c4bf046-633a-4882-9c1b-d8c8ae865e0c","layout":{"x":8,"y":0,"width":8,"height":7},"queryRef":{"kind":"query","queryId":"81e5625e-e81e-4d77-8e71-54f7f24adfa6"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"649e434c-90c3-4143-bf69-8d9156426a12","title":"Distribution of sync types","visualType":"pie","pageId":"2c4bf046-633a-4882-9c1b-d8c8ae865e0c","layout":{"x":0,"y":0,"width":8,"height":7},"queryRef":{"kind":"query","queryId":"b9d85119-989b-42cf-8ba8-3ec61f45c991"},"visualOptions":{"hideLegend":true,"legendLocation":"bottom","xColumn":null,"yColumns":null,"seriesColumns":null,"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","pie__topNSlices":null,"crossFilter":[{"interaction":"column","property":"Data sync mode","parameterId":"c4b6769a-d6a3-49eb-a5e5-5a187c125d9e","disabled":false}],"drillthrough":[]}},{"id":"c7bc9b1a-f276-4914-b1a2-93fd0f9db570","title":"Payload size","visualType":"table","pageId":"99d21f16-d934-4396-a3eb-8a3769905b28","layout":{"x":0,"y":7,"width":11,"height":7},"queryRef":{"kind":"query","queryId":"12efe4b9-2b0b-40bf-8cb9-c8b4c9ab3188"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"b0146156-b90b-446c-b235-21151abed7a0","title":"Records on the Device","visualType":"pie","pageId":"99d21f16-d934-4396-a3eb-8a3769905b28","layout":{"x":0,"y":0,"width":11,"height":7},"queryRef":{"kind":"query","queryId":"7f281311-3bd3-403b-ae54-2c79ec22d174"},"visualOptions":{"hideLegend":true,"legendLocation":"bottom","xColumn":null,"yColumns":null,"seriesColumns":null,"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","pie__topNSlices":null,"crossFilter":[{"interaction":"column","property":"entityName","parameterId":"f31e4692-9674-441e-8335-2c38261a1dd9","disabled":false}],"drillthrough":[]}},{"id":"a4e5427a-f25f-4e85-89b2-8ff349e4e390","title":"Sync errors summary","visualType":"table","pageId":"65fe85ff-5bd9-4fbb-9c7e-281753751111","layout":{"x":0,"y":0,"width":18,"height":7},"queryRef":{"kind":"query","queryId":"e58c11e2-6552-4f11-9581-b8a46274fd8a"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":true,"crossFilter":[{"interaction":"column","property":"ErrorMessage","parameterId":"4a62d3c9-1dca-4a4e-b2ba-a558bffa585a","disabled":false}],"drillthrough":[{"destinationPages":[],"disabled":false}],"table__renderLinks":[],"colorRules":[]}},{"id":"dcf1ddce-7205-474d-86da-cb7fbec09d6c","title":"Sync Error Timeline","visualType":"timechart","pageId":"65fe85ff-5bd9-4fbb-9c7e-281753751111","layout":{"x":0,"y":7,"width":18,"height":6},"queryRef":{"kind":"query","queryId":"55fe182e-2f2b-4184-9d65-fb6583134b08"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"6ad6ce36-e9fb-428a-ad87-67f198e7adf9","title":"Network connectivity","visualType":"table","pageId":"c89a5627-e619-4f8b-a235-b557a24b70b9","layout":{"x":11,"y":0,"width":13,"height":8},"queryRef":{"kind":"query","queryId":"d74f7f64-9a87-4df1-a6ed-11ac504866bc"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"3435aecf-1040-4c27-bdcc-25209f93e2c9","title":"Offline Filter performance","visualType":"table","pageId":"c89a5627-e619-4f8b-a235-b557a24b70b9","layout":{"x":0,"y":0,"width":11,"height":8},"queryRef":{"kind":"query","queryId":"311a3edb-9d5a-4549-9e9c-82b73378df97"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"b869011a-e465-4e82-b8af-92dc0439afb9","title":"Average duration of Sync by Device Type","visualType":"table","pageId":"c89a5627-e619-4f8b-a235-b557a24b70b9","layout":{"x":0,"y":8,"width":24,"height":9},"queryRef":{"kind":"query","queryId":"e6146797-b35c-4a53-801b-c65ba6e62925"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"17d63e8d-0059-4334-9adb-1b0cbe341afc","title":"Record Synced ","visualType":"timechart","pageId":"99d21f16-d934-4396-a3eb-8a3769905b28","layout":{"x":11,"y":0,"width":9,"height":7},"queryRef":{"kind":"query","queryId":"edcfee0a-61c4-4a7f-9b73-4e2bb1e388b5"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"26d6e629-bb56-4bf7-9228-dc31c2c2affe","title":"User sync details","visualType":"table","pageId":"2b5ff991-56c4-4ef4-8717-95b981e68e1a","layout":{"x":0,"y":0,"width":24,"height":15},"queryRef":{"kind":"query","queryId":"668893fb-96d3-4d85-8182-b2e6a108a7b2"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"e2a69f44-854d-4a55-9a00-37374aeefaf9","title":"Device Types","visualType":"pie","pageId":"2c4bf046-633a-4882-9c1b-d8c8ae865e0c","layout":{"x":0,"y":14,"width":10,"height":7},"queryRef":{"kind":"query","queryId":"46e39fd8-216f-441b-9696-8935c894d95f"},"visualOptions":{"hideLegend":false,"legendLocation":"bottom","xColumn":null,"yColumns":null,"seriesColumns":null,"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","pie__topNSlices":null,"crossFilter":[],"drillthrough":[]}}],"baseQueries":[],"parameters":[{"kind":"duration","id":"f3d58970-f03f-44f3-a90d-044ae182e790","displayName":"Time range","description":"","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":30,"unit":"days"},"showOnPages":{"kind":"all"}},{"kind":"string","id":"c4b6769a-d6a3-49eb-a5e5-5a187c125d9e","displayName":"Data Sync Mode","description":"","variableName":"dataSyncMode","selectionType":"array","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"static","values":[{"displayText":"First Sync","value":"FIRST_SYNC"},{"displayText":"Delta Sync","value":"DELTA_SYNC"},{"displayText":"Grid Sync","value":"GRID_SYNC"},{"displayText":"Forced Sync","value":"FORCED_SYNC"}]},"showOnPages":{"kind":"selection","pageIds":["2c4bf046-633a-4882-9c1b-d8c8ae865e0c","99d21f16-d934-4396-a3eb-8a3769905b28"]}},{"kind":"string","id":"d0a98d1d-131a-49c8-bf20-8ef25b52917f","displayName":"User","description":"Enter the User Id to filter on","variableName":"userId","selectionType":"scalar","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","columns":{"value":"user_Id"},"queryRef":{"kind":"query","queryId":"ba2ec947-4629-49fb-a574-92d3fd84e3e6"}},"showOnPages":{"kind":"selection","pageIds":["9cddfe35-5f0c-4d38-adaa-c39eee388424","65fe85ff-5bd9-4fbb-9c7e-281753751111","c89a5627-e619-4f8b-a235-b557a24b70b9","99d21f16-d934-4396-a3eb-8a3769905b28","2b5ff991-56c4-4ef4-8717-95b981e68e1a"]}},{"kind":"string","selectionType":"freetext","id":"192ae620-b9e4-4ef6-9956-6660513c7c4b","displayName":"Session Id","variableName":"sessionId","description":"","defaultValue":{"kind":"all"},"showOnPages":{"kind":"selection","pageIds":[]}},{"kind":"string","selectionType":"freetext","id":"4a62d3c9-1dca-4a4e-b2ba-a558bffa585a","displayName":"Error Message","variableName":"errorMessage","description":"","defaultValue":{"kind":"all"},"showOnPages":{"kind":"selection","pageIds":["65fe85ff-5bd9-4fbb-9c7e-281753751111"]}},{"kind":"string","id":"01d72c36-5756-4fa0-bbc3-8a4af278b622","displayName":"External Correlation ID","description":"","variableName":"externalCorrelationId","selectionType":"scalar","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","columns":{"value":"operation_Id"},"queryRef":{"kind":"query","queryId":"dae07a90-1de5-4ff4-b4c7-3a3d9f356423"}},"showOnPages":{"kind":"selection","pageIds":["c89a5627-e619-4f8b-a235-b557a24b70b9"]}},{"kind":"string","id":"f31e4692-9674-441e-8335-2c38261a1dd9","displayName":"Table Name","description":"Table Name","variableName":"tableName","selectionType":"scalar","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","columns":{"value":"entityName"},"queryRef":{"kind":"query","queryId":"9b6d2228-ee12-4d51-8209-3d59ec3afead"}},"showOnPages":{"kind":"selection","pageIds":["99d21f16-d934-4396-a3eb-8a3769905b28"]}}],"dataSources":[{"id":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f","kind":"manual-kusto","scopeId":"kusto","name":"FTFrontlineAppInsights ","clusterUri":"https://ade.applicationinsights.io/subscriptions/3dfcb4b8-d692-458f-84ee-c0bd625e6969%3E/resourcegroups/FTFrontline_NAM/providers/microsoft.insights/components/FTFrontlineAppInsights","database":"FTFrontlineAppInsights"}],"pages":[{"name":"Sync Summary","id":"2c4bf046-633a-4882-9c1b-d8c8ae865e0c"},{"name":"Sync Errors","id":"65fe85ff-5bd9-4fbb-9c7e-281753751111"},{"name":"Sync Performance","id":"c89a5627-e619-4f8b-a235-b557a24b70b9"},{"name":"Sync Payload","id":"99d21f16-d934-4396-a3eb-8a3769905b28"},{"name":"Sync Details","id":"2b5ff991-56c4-4ef4-8717-95b981e68e1a"}],"queries":[{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between  (_startTime.._endTime)\n| where name == \"Offline.SyncDatabase\"\n| extend cd = parse_json(customDimensions)\n| where isnotempty(user_Id) // Filter out rows where user_Id is empty\n| where cd.AppFlavor == \"FieldService\"\n| extend appVersion = tostring(cd.AppInfo_Version)\n| extend Version = extract(@\"\\b\\d+\\.(\\d+\\.\\d+)\", 1, appVersion)\n| extend DeviceInfo_OsName = tostring(cd.DeviceInfo_OsName)\n| where isnotempty(Version)  // Filter our request where there's no app version\n| summarize Users = dcount(user_Id),              \n             Android = dcountif(user_Id, DeviceInfo_OsName == \"Android\"), \n             iOS = dcountif(user_Id, DeviceInfo_OsName == \"iOS\"  or DeviceInfo_OsName == \"iPadOS\"), \n             Windows = dcountif(user_Id, DeviceInfo_OsName has \"Windows\") \n         by Version\n| order by Version asc","id":"3c6773d8-c437-4c9a-81f3-c59307510481","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between  (_startTime.._endTime)\n| where name endswith \"Offline.SyncDatabase\"\n| extend cd = parse_json(customDimensions)\n| extend eventContext = parse_json(tostring(cd.eventContext))\n| extend syncMode = tostring(customDimensions.DataSyncMode)\n| extend EventName = tostring(cd.eventName)\n| extend ScenarioResult = tostring(cd.ScenarioResult)\n| where isempty(['dataSyncMode']) or syncMode in (['dataSyncMode'])\n| where isnotempty(ScenarioResult)\n| summarize Success = todouble(countif(ScenarioResult == \"SUCCESS\")), All = countif(ScenarioResult == \"SUCCESS\" or ScenarioResult == \"FAILURE\") by bin(timestamp, 1d)\n| extend SuccessRate = todouble(Success/All) * 100\n| project timestamp, SuccessRate\n\n","id":"1968623d-54aa-4c5b-af95-f898a6335f32","usedVariables":["_endTime","_startTime","dataSyncMode"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between  (_startTime.._endTime)\n| where name == \"Offline.SyncDatabase\"\n| extend cd = parse_json(customDimensions)\n| extend eventContext = parse_json(tostring(cd.eventContext))\n| extend EventName = tostring(cd.eventName)\n| extend DataSyncMode = iff(isempty(['dataSyncMode']), \"All\", tostring(customDimensions.DataSyncMode))\n| where isempty(['dataSyncMode']) or DataSyncMode in (['dataSyncMode'])\n| project timestamp, name, user_Id, DataSyncMode, cd, eventContext, duration\n| summarize percentiles(duration, 95) by bin(timestamp, 1d), DataSyncMode\n| order by timestamp desc\n| project-rename ['Timestamp'] =  timestamp, ['Data sync mode'] =  DataSyncMode, ['P95 Duration (ms)'] =  percentile_duration_95\n| limit 20\n","id":"424e5000-97eb-4c0f-8f9f-002c70ca8b8d","usedVariables":["_endTime","_startTime","dataSyncMode"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between  (_startTime.._endTime)\n| where name == \"Offline.SyncDatabase\"\n| extend cd = parse_json(customDimensions)\n| extend eventContext = parse_json(tostring(cd.eventContext))\n| extend profileId = tostring(eventContext.ProfileId)\n| summarize ['Unique Users'] = dcount(profileId) by bin(timestamp, 1d)\n","id":"81e5625e-e81e-4d77-8e71-54f7f24adfa6","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies \n| where timestamp between  (_startTime.._endTime)\n| where name == \"Offline.SyncDatabase\"\n| extend cd = parse_json(customDimensions)\n| extend eventContext = parse_json(tostring(cd.eventContext))\n| extend dataSyncMode = tostring(customDimensions.DataSyncMode)\n| where isnotempty(dataSyncMode)\n| summarize count() by dataSyncMode\n| project-rename ['Data sync mode'] = dataSyncMode\n| render piechart ","id":"b9d85119-989b-42cf-8ba8-3ec61f45c991","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies \n| where timestamp between  (_startTime.._endTime)\n| where name startswith \"Offline\" \n| extend cd = parse_json(customDimensions)\n| extend eventContext = parse_json(tostring(cd.EventContext))\n| extend entityName = tostring(eventContext.EntityName)\n| extend syncMode = tostring(customDimensions.DataSyncMode)\n| extend contentLength = toint(eventContext.ContentLength)\n| extend responseSize = toint(eventContext.ResponseSize)\n| extend shortName = trim_start(\"Offline.DdsClient.([A-Za-Z)*])\", name)\n| where isnotempty(syncMode)\n| where responseSize > 0\n| extend responseSizeKb = responseSize/1024\n| project timestamp, contentLength, responseSize,responseSizeKb, entityName,  user_Id, syncMode, shortName\n| summarize ['Average Response Size in Kb'] = round(avg(responseSizeKb)) by syncMode\n| project-rename ['Data sync mode'] = syncMode\n| order by ['Average Response Size in Kb']","id":"12efe4b9-2b0b-40bf-8cb9-c8b4c9ab3188","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between  (_startTime.._endTime)\n| where isempty(['userId']) or user_Id == ['userId']\n| where name startswith \"Offline\" \n| extend cd = parse_json(customDimensions)\n| extend eventContext = parse_json(tostring(cd.EventContext))\n| extend entityName = tostring(eventContext.EntityName)\n| extend recordCount = toint(eventContext.RecordCount)\n| extend currentSyncId = tostring(eventContext.CurrentSyncId)\n| where recordCount > 0\n| where isnotempty(entityName) \n| project timestamp, recordCount, entityName, currentSyncId\n| summarize sum(recordCount) by entityName, currentSyncId\n| summarize avg(sum_recordCount) by entityName\n","id":"7f281311-3bd3-403b-ae54-2c79ec22d174","usedVariables":["_endTime","_startTime","userId"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between  (_startTime.._endTime)\n| where name == \"Offline.SyncDatabase\"\n| where success == false\n| extend cd = parse_json(customDimensions)\n| extend AppVersion = tostring(cd.AppInfo_Version)\n| extend ErrorCode = tostring(cd.ErrorCode)\n| extend ErrorMessage = tostring(cd.ErrorMessage)\n| extend FailureType = tostring(cd.FailureType)\n| where isempty(['userId']) or user_Id == ['userId']\n| summarize UsersImpacted = dcount(user_Id), ErrorCount= count() by ErrorCode, ErrorMessage, FailureType\n| order by ErrorCount\n| project-rename ['Error code'] = ErrorCode,['Error message'] = ErrorMessage, ['Failure type'] = FailureType, ['Errors'] = ErrorCount,  ['Users impacted'] = UsersImpacted\n| order by ['Error code']\n\n","id":"e58c11e2-6552-4f11-9581-b8a46274fd8a","usedVariables":["_endTime","_startTime","userId"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between  (_startTime.._endTime)\n| where name == \"Offline.SyncDatabase\"\n| where success == false\n| where isempty(['userId']) or user_Id == ['userId']\n| extend cd = parse_json(customDimensions)\n| extend AppVersion = tostring(cd.AppInfo_Version)\n| extend ErrorCode = tostring(cd.ErrorCode)\n| extend ErrorMessage = tostring(cd.ErrorMessage)\n| extend FailureType = tostring(cd.FailureType)\n| where isempty(['errorMessage']) or ErrorMessage contains ['errorMessage']\n| summarize ['Users Impacted'] = dcount(user_Id), Errors = count() by bin(timestamp, 1d)\n| render timechart ","id":"55fe182e-2f2b-4184-9d65-fb6583134b08","usedVariables":["_endTime","_startTime","errorMessage","userId"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"pageViews\n| where timestamp between  (_startTime.._endTime)\n| extend hostType = tostring(customDimensions.hostType)\n| where hostType == \"MobileApplication\"\n| extend networkConnectivityState = tostring(customDimensions.networkConnectivityState)\n| extend warmThroughput = toint(customDimensions.warmThroughput)\n| extend warmLatency = toint(customDimensions.warmLatency)\n| extend coldLatency = toint(customDimensions.coldLatency)\n| extend City = client_City\n| extend stateorProvince = client_StateOrProvince\n| extend countryOrRegion = client_CountryOrRegion\n| where isempty(['userId']) or user_Id == ['userId']\n| project timestamp, networkConnectivityState, warmThroughput, warmLatency, coldLatency, City, stateorProvince, countryOrRegion\n| summarize ['Throughput Kbs'] = percentile(warmThroughput, 95), ['Latency ms'] =  percentile(warmLatency, 95), ['Online Count'] = countif(networkConnectivityState == \"online\"), ['Offline Count'] = countif(networkConnectivityState == \"offline\")  by ['State'] = stateorProvince, ['Country'] = countryOrRegion\n| order by ['Latency ms'] desc\n| limit 100\n","id":"d74f7f64-9a87-4df1-a6ed-11ac504866bc","usedVariables":["_endTime","_startTime","userId"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between  (_startTime.._endTime)\n| where name startswith \"Offline.SyncDatabase\"\n| extend cd = parse_json(customDimensions)\n| extend eventContext = parse_json(tostring(cd.EventContext))\n| extend currentSyncId = tostring(eventContext[\"CurrentSyncId\"])\n| project operation_Id, currentSyncId\n| where isempty(['externalCorrelationId']) or operation_Id == ['externalCorrelationId']\n| join \n(\n    dependencies    \n    | where timestamp > ago(7d)\n    | where type == \"SDKRetrieveMultiple\"\n    | extend requestId = trim_end(\"_([a-z0-9-]*)\", operation_Id)    \n) on $left.operation_Id == $right.requestId\n| summarize  percentiles(duration, 50, 95) by target\n| order by  percentile_duration_95\n| project Table = target, ['Average Duration (ms)'] = round(percentile_duration_50, 0), ['P95 Duration (ms)'] = round(percentile_duration_95, 0)\n\n\n\n","id":"311a3edb-9d5a-4549-9e9c-82b73378df97","usedVariables":["_endTime","_startTime","externalCorrelationId"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where name == \"Offline.SyncDatabase\"\n| extend cd = parse_json(customDimensions)\n| extend ActiveDuration = toint(tostring(cd.ActiveDuration))\n| extend WithBackgroundTime = duration\n| extend DataSyncMode = tostring(cd.DataSyncMode)\n| extend DeviceInfo_OsName = tostring(cd.DeviceInfo_OsName)\n| extend DeviceInfo_Make = tostring(cd.DeviceInfo_make)\n| extend DeviceInfo_Model = tostring(cd.DeviceInfo_model)\n| where isnotempty(DataSyncMode)\n| summarize percentile_ActiveDuration_95= round(percentile(ActiveDuration, 95)/1000, 0), percentile_WithBackgroundTime_95 = round(percentile(WithBackgroundTime, 95)/1000, 0) by client_Type, DataSyncMode, DeviceInfo_Make, DeviceInfo_Model\n| order by DataSyncMode, client_Type, DeviceInfo_Make, DeviceInfo_Model\n| project ['Data sync mode']  = DataSyncMode, ['Client type'] = client_Type, ['Device Make'] = DeviceInfo_Make,['Model'] = DeviceInfo_Model, ['P95 Active Duration (in seconds)'] = percentile_ActiveDuration_95, ['P95 With Background Time Duration (in seconds)'] = percentile_WithBackgroundTime_95\n","id":"e6146797-b35c-4a53-801b-c65ba6e62925","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between (['_startTime'] .. ['_endTime']) // Time range filtering\n| where isempty(['userId']) or user_Id == ['userId'] // Single selection filtering\n| where name startswith \"Offline\" \n| extend cd = parse_json(customDimensions)\n| extend eventContext = parse_json(tostring(cd.EventContext))\n| extend entityName = tostring(eventContext.EntityName)\n| where isempty(['tableName']) or entityName == ['tableName'] \n| extend dataSyncMode  = iff(isempty(['dataSyncMode']), \"All\", tostring(customDimensions.DataSyncMode))\n| where isempty(['dataSyncMode']) or dataSyncMode == ['dataSyncMode']\n| extend recordCount = toint(eventContext.RecordCount)\n| extend currentSyncId = tostring(eventContext.CurrentSyncId)\n| where recordCount > 0\n| where isnotempty(entityName) \n| project timestamp, recordCount, entityName,  user_Id\n| order by timestamp asc\n| extend syncCount = recordCount\n| summarize [\"Total Syncs\"] = sum(syncCount) by bin(timestamp, 1min)\n\n\n","id":"edcfee0a-61c4-4a7f-9b73-4e2bb1e388b5","usedVariables":["_endTime","_startTime","dataSyncMode","tableName","userId"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where name == \"Offline.SyncDatabase\"\n| where isempty(['userId']) or user_Id == ['userId'] // Single selection filtering\n| extend cd = parse_json(customDimensions)\n| extend ActiveDuration = toint(tostring(cd.ActiveDuration))\n| extend WithBackgroundTime = duration\n| extend DataSyncMode = tostring(cd.DataSyncMode)\n| extend ErrorMessage = tostring(cd.ErrorMessage)\n| extend DeviceInfo_OsName = tostring(cd.DeviceInfo_OsName)\n| extend DeviceInfo_make = tostring(cd.DeviceInfo_make)\n| extend DeviceInfo_model = tostring(cd.DeviceInfo_model)\n| where isnotempty(DataSyncMode)\n| summarize P50ActiveDurationInSec = round(percentile(ActiveDuration, 50)/1000, 0),P50WithBackgroundTimeInSec = round(percentile(WithBackgroundTime, 50)/1000, 0), arg_max(timestamp, ErrorMessage), Failures = countif(success == false) by UserAzureObjectID = user_Id, DataSyncMode,DeviceInfo_OsName, DeviceInfo_make, DeviceInfo_model\n| project ['Timestamp'] = timestamp, ['User Azure Object ID'] = UserAzureObjectID, ['Data Sync Mode'] = DataSyncMode, ['OS'] = DeviceInfo_OsName, ['Make'] = DeviceInfo_make, ['Model'] =  DeviceInfo_model, ['P50 Active duration (seconds)'] = P50ActiveDurationInSec , ['P50 with background time (sec)'] = P50WithBackgroundTimeInSec,Failures, ['Error message'] = ErrorMessage\n| order by Timestamp desc","id":"668893fb-96d3-4d85-8182-b2e6a108a7b2","usedVariables":["userId"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between  (_startTime.._endTime)\n| where name == \"Offline.SyncDatabase\"\n| extend cd = parse_json(customDimensions)\n| where isnotempty(user_Id) // Filter out rows where user_Id is empty\n| where cd.AppFlavor == \"FieldService\"\n| extend appVersion = tostring(cd.AppInfo_Version)\n| extend Version = extract(@\"\\b\\d+\\.(\\d+\\.\\d+)\", 1, appVersion)\n| extend DeviceInfo_OsName = tostring(cd.DeviceInfo_OsName)\n| extend DeviceInfo_MakeModel = strcat(tostring(cd.DeviceInfo_make), \" \", tostring(cd.DeviceInfo_model))\n| summarize count() by DeviceInfo_MakeModel\n","id":"46e39fd8-216f-441b-9696-8935c894d95f","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between (['_startTime'] .. ['_endTime'])\n| where name == \"Offline.SyncDatabase\"\n| distinct user_Id\n| order by user_Id asc","id":"ba2ec947-4629-49fb-a574-92d3fd84e3e6","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between (['_startTime'] .. ['_endTime'])\n| where name == \"Offline.SyncDatabase\"\n| distinct operation_Id\n| order by operation_Id asc","id":"dae07a90-1de5-4ff4-b4c7-3a3d9f356423","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"a4e5cd1a-4108-4038-b1bb-ae78645a7c7f"},"text":"dependencies\n| where timestamp between (['_startTime'] .. ['_endTime']) // Time range filtering\n| where name startswith \"Offline\" \n| extend cd = parse_json(customDimensions)\n| extend eventContext = parse_json(tostring(cd.EventContext))\n| extend entityName = tostring(eventContext.EntityName)\n| where isnotempty(entityName)\n| distinct entityName\n| order by entityName asc","id":"9b6d2228-ee12-4d51-8209-3d59ec3afead","usedVariables":["_endTime","_startTime"]}]}